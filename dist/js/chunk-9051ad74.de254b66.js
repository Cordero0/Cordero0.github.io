(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9051ad74"],{"31b7":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),a={class:"access-admin"},o={class:"other-action"},r={class:"search"},i={class:"add"},l={key:0,class:"add-server"},d={key:0,class:"add-action"},u={class:"edit-sure"},s={key:1,class:"action"},b=["onClick"],f={class:"edit"},O={key:0,class:"edit-sure"},p=["onClick"],j={key:1},v=["onClick"];function m(e,t,n,m,k,y){var h=Object(c["resolveComponent"])("a-input"),C=Object(c["resolveComponent"])("SearchOutlined"),x=Object(c["resolveComponent"])("a-button"),V=Object(c["resolveComponent"])("PlusOutlined"),E=Object(c["resolveComponent"])("a-tag"),g=Object(c["resolveComponent"])("plus-outlined"),w=Object(c["resolveComponent"])("a-popconfirm"),S=Object(c["resolveComponent"])("a-table");return Object(c["openBlock"])(),Object(c["createElementBlock"])("div",a,[Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("div",r,[Object(c["createVNode"])(h,{value:e.nameSearch,"onUpdate:value":t[0]||(t[0]=function(t){return e.nameSearch=t}),style:{width:"200px"},placeholder:m.t("accessAdmin.name")},null,8,["value","placeholder"]),Object(c["createVNode"])(h,{value:e.positionSearch,"onUpdate:value":t[1]||(t[1]=function(t){return e.positionSearch=t}),style:{width:"200px"},placeholder:m.t("accessAdmin.position")},null,8,["value","placeholder"]),Object(c["createVNode"])(x,{type:"primary",onClick:m.searchHandle},{icon:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(C)]})),default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(m.t("accessAdmin.search")),1)]})),_:1},8,["onClick"])]),Object(c["createElementVNode"])("div",i,[Object(c["createVNode"])(x,{type:"primary",onClick:m.addHandle},{icon:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(V)]})),default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(m.t("accessAdmin.add")),1)]})),_:1},8,["onClick"])])]),Object(c["createVNode"])(S,{columns:m.columns,"data-source":m.dataSource,bordered:"",pagination:{pageSize:6}},Object(c["createSlots"])({servers:Object(c["withCtx"])((function(n){var a=n.record;return[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(a.servers,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])(E,{key:e,closable:null!=m.editableData[a.key],onClose:function(t){return m.handleClose(e,a.key)},color:"geekblue"},{default:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(e),1)]})),_:2},1032,["closable","onClose"])})),128)),e.addEdit&&(m.addData.key==a.key||m.editableData[a.key])?(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",l,[e.inputVisible&&(m.addData.key==a.key||m.editableData[a.key])?(Object(c["openBlock"])(),Object(c["createBlock"])(h,{key:0,ref:"inputRef",value:e.inputValue,"onUpdate:value":t[2]||(t[2]=function(t){return e.inputValue=t}),type:"text",size:"small",style:{width:"78px"},onBlur:function(e){return m.handleInputConfirm(a.key)},onKeyup:Object(c["withKeys"])((function(e){return m.handleInputConfirm(a.key)}),["enter"])},null,8,["value","onBlur","onKeyup"])):(Object(c["openBlock"])(),Object(c["createBlock"])(E,{key:1,style:{background:"#fff","border-style":"dashed"},onClick:m.showInput},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(g),Object(c["createTextVNode"])(" "+Object(c["toDisplayString"])(m.t("accessAdmin.actions.newTag")),1)]})),_:1},8,["onClick"]))])):Object(c["createCommentVNode"])("",!0)]})),action:Object(c["withCtx"])((function(n){var a=n.record;return[m.addData.key==a.key&&e.addEdit?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",d,[Object(c["createElementVNode"])("div",u,[Object(c["createElementVNode"])("a",{onClick:t[3]||(t[3]=function(){return m.addSave&&m.addSave.apply(m,arguments)})},Object(c["toDisplayString"])(m.t("accessAdmin.actions.save")),1),Object(c["createVNode"])(w,{title:"Sure to cancel?",okText:"YES",cancelText:"NO",onConfirm:m.addCancel},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("a",null,Object(c["toDisplayString"])(m.t("accessAdmin.actions.cancel")),1)]})),_:1},8,["onConfirm"])])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",s,[Object(c["createElementVNode"])("a",{onClick:function(e){return m.deleteHandle(a.key)}},Object(c["toDisplayString"])(m.t("accessAdmin.actions.delete")),9,b),Object(c["createElementVNode"])("div",f,[m.editableData[a.key]?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",O,[Object(c["createElementVNode"])("a",{onClick:function(e){return m.save(a.key)}},Object(c["toDisplayString"])(m.t("accessAdmin.actions.save")),9,p),Object(c["createVNode"])(w,{title:"Sure to cancel?",okText:"YES",cancelText:"NO",onConfirm:function(e){return m.cancel(a.key)}},{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("a",null,Object(c["toDisplayString"])(m.t("accessAdmin.actions.cancel")),1)]})),_:2},1032,["onConfirm"])])):(Object(c["openBlock"])(),Object(c["createElementBlock"])("span",j,[Object(c["createElementVNode"])("a",{onClick:function(e){return m.editHandle(a.key)}},Object(c["toDisplayString"])(m.t("accessAdmin.actions.edit")),9,v)]))])]))]})),_:2},[Object(c["renderList"])(["name","position","email"],(function(t){return{name:t,fn:Object(c["withCtx"])((function(n){var a=n.text,o=n.record;return[Object(c["createElementVNode"])("div",null,[m.editableData[o.key]?(Object(c["openBlock"])(),Object(c["createBlock"])(h,{key:0,value:m.editableData[o.key][t],"onUpdate:value":function(e){return m.editableData[o.key][t]=e},style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):o.key==m.addData.key&&e.addEdit?(Object(c["openBlock"])(),Object(c["createBlock"])(h,{key:1,value:m.addData[t],"onUpdate:value":function(e){return m.addData[t]=e},style:{margin:"-5px 0"}},null,8,["value","onUpdate:value"])):(Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],{key:2},[Object(c["createTextVNode"])(Object(c["toDisplayString"])(a),1)],64))])]}))}}))]),1032,["columns","data-source"])])}var k=n("5530"),y=n("2909"),h=(n("d81d"),n("4de4"),n("4d63"),n("ac1f"),n("25f0"),n("b0c0"),n("99af"),n("5c8a")),C=n("47ce"),x=n("e9d5"),V=n("27fe"),E=n("f64c"),g=n("d899"),w=[{title:"",dataIndex:"name",width:"15%",key:"name",slots:{customRender:"name"}},{title:"",dataIndex:"position",width:"15%",key:"position",slots:{customRender:"position"}},{title:"",dataIndex:"email",width:"25%",key:"email",slots:{customRender:"email"}},{title:"",dataIndex:"servers",width:"30%",key:"servers",slots:{customRender:"servers"}},{title:"",dataIndex:"action",key:"action",slots:{customRender:"action"}}],S={name:"AccessAdmin",components:{PlusOutlined:C["a"],SearchOutlined:x["a"]},setup:function(){var e=Object(g["useI18n"])(),t=e.t,n=e.locale;Object(c["onMounted"])((function(){V["a"].get("/members/msg").then((function(e){a.value=e,o=e})),w.map((function(e){e.title=t("accessAdmin.".concat(e.key))}))})),Object(c["watch"])(n,(function(){w.map((function(e){e.title=t("accessAdmin.".concat(e.key))}))}));var a=Object(c["ref"])([]),o=[],r=Object(c["reactive"])({}),i=function(e){console.log(a),a.value=a.value.filter((function(t){return e!=t.key})),console.log("delete"+e)},l=function(e){C.addEdit=!0,r[e]=Object(h["a"])(a.value.filter((function(t){return e===t.key}))[0])},d=function(e,t){a.value.map((function(n){if(n.key===t){var c=n.servers.filter((function(t){return t!==e}));n.servers=c}}))},u=function(e){C.addEdit=!1,Object.assign(a.value.filter((function(t){return e===t.key}))[0],r[e]),delete r[e]},s=function(e){C.addEdit=!1,delete r[e]},b=Object(c["reactive"])({nameSearch:"",positionSearch:""}),f=function(){a.value=o;var e=RegExp("".concat(b.nameSearch),"i"),t=RegExp("".concat(b.positionSearch),"i");a.value=a.value.filter((function(n){return e.test(n.name)&&t.test(n.position)}))},O=Object(c["ref"])({}),p=function(){C.addEdit=!0,O.value={key:"".concat(a.value.length+1),name:"",position:"position",email:"",servers:[]},a.value=[O.value].concat(Object(y["a"])(a.value))},j=function(){V["a"].post("/members/add",O.value).then((function(e){200===e.code?E["a"].success("Added successfully!"):(E["a"].error("Add failed!"),a.value.shift())})).catch((function(e){E["a"].error(e),a.value.shift()})),C.addEdit=!1,O.value={}},v=function(){a.value.shift(),C.addEdit=!1,O.value={}},m=Object(c["ref"])(),C=Object(c["reactive"])({inputVisible:!1,inputValue:"",addEdit:!1}),x=function(){C.inputVisible=!0,Object(c["nextTick"])((function(){m.value.focus()}))},S=function(e){var t=C.inputValue;a.value.map((function(n){if(n.key===e){var c=n.servers;t&&-1===c.indexOf(t)&&(c=[].concat(Object(y["a"])(c),[t])),n.servers=c,!r[e]||(r[e].servers=c)}})),Object.assign(C,{inputVisible:!1,inputValue:""})};return Object(k["a"])(Object(k["a"])(Object(k["a"])({t:t,columns:w,dataSource:a,editableData:r},Object(c["toRefs"])(b)),{},{addData:O},Object(c["toRefs"])(C)),{},{inputRef:m,deleteHandle:i,editHandle:l,save:u,cancel:s,searchHandle:f,addHandle:p,showInput:x,handleClose:d,handleInputConfirm:S,addSave:j,addCancel:v})}},N=(n("b6cd"),n("6b0d")),B=n.n(N);const D=B()(S,[["render",m]]);t["default"]=D},"387e":function(e,t,n){e.exports={name:'"less"',headerColor:"var(--headerColor, #505464)",chartColor:"var(--chartColor, #fafafa)",borderColor:"var(--borderColor, #eef0fc)",fontColor:"var(--fontColor, white)",pointFontColor:"var(--pointFontColor, #4F94FA)"}},"99af":function(e,t,n){"use strict";var c=n("23e7"),a=n("d039"),o=n("e8b5"),r=n("861d"),i=n("7b0b"),l=n("07fa"),d=n("8418"),u=n("65f0"),s=n("1dde"),b=n("b622"),f=n("2d00"),O=b("isConcatSpreadable"),p=9007199254740991,j="Maximum allowed index exceeded",v=f>=51||!a((function(){var e=[];return e[O]=!1,e.concat()[0]!==e})),m=s("concat"),k=function(e){if(!r(e))return!1;var t=e[O];return void 0!==t?!!t:o(e)},y=!v||!m;c({target:"Array",proto:!0,forced:y},{concat:function(e){var t,n,c,a,o,r=i(this),s=u(r,0),b=0;for(t=-1,c=arguments.length;t<c;t++)if(o=-1===t?r:arguments[t],k(o)){if(a=l(o),b+a>p)throw TypeError(j);for(n=0;n<a;n++,b++)n in o&&d(s,b,o[n])}else{if(b>=p)throw TypeError(j);d(s,b++,o)}return s.length=b,s}})},b6cd:function(e,t,n){"use strict";n("387e")}}]);
//# sourceMappingURL=chunk-9051ad74.de254b66.js.map