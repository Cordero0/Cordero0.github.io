{"version":3,"sources":["webpack:///./src/views/Home/Children/UserAdmin/AccessAdmin.vue","webpack:///./src/views/Home/Children/UserAdmin/AccessAdmin.vue?d5ab","webpack:///./src/views/Home/Children/UserAdmin/AccessAdmin.vue?7ad4","webpack:///./node_modules/core-js/modules/es.array.concat.js","webpack:///./src/views/Home/Children/UserAdmin/AccessAdmin.vue?5911"],"names":["class","value","nameSearch","style","placeholder","t","positionSearch","type","searchHandle","icon","addHandle","columns","data-source","dataSource","bordered","pagination","servers","record","server","closable","editableData","key","handleClose","color","addEdit","addData","inputVisible","ref","inputValue","size","handleInputConfirm","showInput","action","addSave","title","okText","cancelText","addCancel","deleteHandle","save","cancel","editHandle","col","text","dataIndex","width","slots","customRender","name","components","PlusOutlined","SearchOutlined","setup","locale","axios","get","then","res","data","map","item","console","log","filter","state","cloneDeep","removedTag","Object","assign","search","reg1","RegExp","reg2","test","position","length","email","post","code","message","success","error","shift","catch","err","inputRef","focus","indexOf","__exports__","render","module","exports","$","fails","isArray","isObject","toObject","lengthOfArrayLike","createProperty","arraySpeciesCreate","arrayMethodHasSpeciesSupport","wellKnownSymbol","V8_VERSION","IS_CONCAT_SPREADABLE","MAX_SAFE_INTEGER","MAXIMUM_ALLOWED_INDEX_EXCEEDED","IS_CONCAT_SPREADABLE_SUPPORT","array","concat","SPECIES_SUPPORT","isConcatSpreadable","O","spreadable","undefined","FORCED","target","proto","forced","arg","i","k","len","E","this","A","n","arguments","TypeError"],"mappings":"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","file":"js/chunk-9051ad74.de254b66.js","sourcesContent":["<template>\r\n  <div class=\"access-admin\">\r\n    <!-- 搜索功能和添加功能 -->\r\n    <div class=\"other-action\">\r\n      <div class=\"search\">\r\n        <a-input v-model:value=\"nameSearch\" style=\"width: 200px\" :placeholder=\"t('accessAdmin.name')\"></a-input>\r\n        <a-input v-model:value=\"positionSearch\" style=\"width: 200px\" :placeholder=\"t('accessAdmin.position')\"></a-input>\r\n        <a-button type='primary' @click=\"searchHandle\"><template #icon><SearchOutlined /></template>{{t('accessAdmin.search')}}</a-button>\r\n      </div>\r\n      <div class=\"add\">\r\n        <a-button type='primary' @click=\"addHandle\"><template #icon><PlusOutlined /></template>{{t('accessAdmin.add')}}</a-button>\r\n      </div>\r\n    </div>\r\n    <!-- 表格主体 -->\r\n    <a-table :columns='columns' :data-source='dataSource' bordered :pagination=\"{pageSize:6}\">\r\n      <template v-for=\"col in ['name', 'position', 'email']\" #[col]=\"{ text, record }\" :key=\"col\">\r\n        <div>\r\n          <a-input\r\n            v-if=\"editableData[record.key]\"\r\n            v-model:value=\"editableData[record.key][col]\"\r\n            style=\"margin: -5px 0\"\r\n          />\r\n          <a-input\r\n            v-else-if=\"record.key == addData.key && addEdit\"\r\n            v-model:value=\"addData[col]\"\r\n            style=\"margin: -5px 0\"\r\n          />\r\n          <template v-else>\r\n            {{ text }}\r\n          </template>\r\n        </div>\r\n      </template>\r\n      <template #servers={record}>\r\n        <template v-for=\"(server) in record.servers\" :key=\"server\">\r\n          <a-tag :closable=\"editableData[record.key] != null\" @close=\"handleClose(server,record.key)\" color=\"geekblue\">\r\n            {{ server }}\r\n          </a-tag>\r\n        </template>\r\n        <span v-if=\"addEdit && (addData.key == record.key || editableData[record.key])\" class=\"add-server\">\r\n          <a-input\r\n            v-if=\"inputVisible && (addData.key == record.key || editableData[record.key])\"\r\n            ref=\"inputRef\"\r\n            v-model:value=\"inputValue\"\r\n            type=\"text\"\r\n            size=\"small\"\r\n            :style=\"{ width: '78px' }\"\r\n            @blur=\"handleInputConfirm(record.key)\"\r\n            @keyup.enter=\"handleInputConfirm(record.key)\"\r\n          />\r\n          <a-tag v-else style=\"background: #fff; border-style: dashed\" @click=\"showInput\">\r\n            <plus-outlined />\r\n            {{t('accessAdmin.actions.newTag')}}\r\n          </a-tag>  \r\n        </span>\r\n      </template>\r\n      <template #action={record}>\r\n        <div v-if=\"addData.key == record.key && addEdit\" class=\"add-action\">\r\n          <div class=\"edit-sure\">\r\n            <a @click=\"addSave\">{{t('accessAdmin.actions.save')}}</a>\r\n            <a-popconfirm title=\"Sure to cancel?\" okText='YES' cancelText='NO' @confirm=\"addCancel\">\r\n              <a>{{t('accessAdmin.actions.cancel')}}</a>\r\n            </a-popconfirm>\r\n          </div>\r\n        </div>\r\n        <div v-else class=\"action\">\r\n          <a @click=\"deleteHandle(record.key)\">{{t('accessAdmin.actions.delete')}}</a>\r\n          <div class=\"edit\">\r\n            <div class=\"edit-sure\" v-if=\"editableData[record.key]\">\r\n              <a @click=\"save(record.key)\">{{t('accessAdmin.actions.save')}}</a>\r\n              <a-popconfirm title=\"Sure to cancel?\" okText='YES' cancelText='NO' @confirm=\"cancel(record.key)\">\r\n                <a>{{t('accessAdmin.actions.cancel')}}</a>\r\n              </a-popconfirm>\r\n            </div>\r\n            <span v-else>\r\n              <a @click=\"editHandle(record.key)\">{{t('accessAdmin.actions.edit')}}</a>\r\n            </span>  \r\n          </div>\r\n        </div>\r\n      </template> \r\n    </a-table>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { cloneDeep } from 'lodash-es'\r\nimport { ref,reactive,toRefs,nextTick,onMounted, watch} from 'vue'\r\nimport { PlusOutlined,SearchOutlined } from '@ant-design/icons-vue'\r\nimport axios from '@/assets/js/axios.js'\r\nimport { message } from 'ant-design-vue'\r\nimport { useI18n } from 'vue-i18n'\r\n\r\n// 表格配置项\r\nconst columns = [\r\n  {\r\n    title:'',\r\n    dataIndex:'name',\r\n    width:'15%',\r\n    key:'name',\r\n    slots:{customRender:'name'}  \r\n  },{\r\n    title:'',\r\n    dataIndex:'position',\r\n    width:'15%',\r\n    key:'position',\r\n    slots:{customRender:'position'}  \r\n  },{\r\n    title:'',\r\n    dataIndex:'email',\r\n    width:'25%',\r\n    key:'email',\r\n    slots:{customRender:'email'}  \r\n  },{\r\n    title:'',\r\n    dataIndex:'servers',\r\n    width:'30%',\r\n    key:'servers',\r\n    slots: {customRender:'servers'}\r\n  },{\r\n    title:'',\r\n    dataIndex:'action',\r\n    key:'action',\r\n    slots:{customRender:'action'}\r\n  }\r\n]\r\n\r\nexport default {\r\n  name:'AccessAdmin',\r\n  components:{ PlusOutlined,SearchOutlined },\r\n  setup(){\r\n    const { t,locale } = useI18n()\r\n\r\n    onMounted(()=>{\r\n      axios.get('/members/msg').then( res=>{\r\n        dataSource.value = res\r\n        data = res\r\n      })\r\n      columns.map(item=>{\r\n        item.title = t(`accessAdmin.${item.key}`)\r\n      })\r\n    })\r\n\r\n    // 语言切换\r\n    watch(locale,()=>{\r\n      columns.map(item=>{\r\n        item.title = t(`accessAdmin.${item.key}`)\r\n      })\r\n    })\r\n\r\n    // 表格数据\r\n    const dataSource = ref([])\r\n    let data = [] //作为获得的表格数据的备份\r\n\r\n    // 基础编辑功能\r\n    const editableData = reactive({});\r\n    const deleteHandle = (key)=>{\r\n      console.log(dataSource)\r\n      dataSource.value = dataSource.value.filter(res=> key!=res.key)\r\n      console.log('delete'+key)\r\n    }\r\n    const editHandle = (key)=>{\r\n      state.addEdit = true\r\n      editableData[key] = cloneDeep(dataSource.value.filter(item => key === item.key)[0]);\r\n    }\r\n    const handleClose = (removedTag,key)=>{\r\n      dataSource.value.map(item=>{\r\n        if(item.key === key){\r\n          const servers = item.servers.filter(server => server !== removedTag)\r\n          item.servers = servers\r\n        }\r\n      })\r\n    }\r\n    const save = key => {\r\n      state.addEdit = false\r\n      Object.assign(dataSource.value.filter(item => key === item.key)[0], editableData[key]);\r\n      delete editableData[key];\r\n    };\r\n    const cancel = key => {\r\n      state.addEdit = false\r\n      delete editableData[key];\r\n    };\r\n\r\n    // 搜索功能（直接对dataSource做筛选）\r\n    const search = reactive({\r\n      nameSearch:'',\r\n      positionSearch:''\r\n    })\r\n    const searchHandle = ()=>{\r\n      dataSource.value = data\r\n      const reg1 = RegExp(`${search.nameSearch}`,'i')\r\n      const reg2 = RegExp(`${search.positionSearch}`,'i')\r\n      dataSource.value = dataSource.value.filter(res=>reg1.test(res.name)&&reg2.test(res.position)) \r\n    }\r\n\r\n    // 添加表项\r\n    let addData = ref({})\r\n    const addHandle = ()=>{\r\n      state.addEdit = true\r\n      addData.value = {\r\n        key:`${dataSource.value.length+1}`,\r\n        name:'',\r\n        position:'position',\r\n        email:'',\r\n        servers:[]  \r\n      }\r\n      dataSource.value = [addData.value,...dataSource.value]\r\n    }\r\n    const addSave = ()=>{\r\n      axios.post('/members/add',addData.value).then(\r\n        res=>{\r\n          if(res.code === 200){\r\n            message.success('Added successfully!')\r\n          }else{\r\n            message.error('Add failed!')\r\n            dataSource.value.shift()\r\n          }\r\n        }\r\n      ).catch(err=>{\r\n        message.error(err)\r\n        dataSource.value.shift()\r\n      })\r\n      state.addEdit = false\r\n      addData.value = {}\r\n    }\r\n    const addCancel = ()=>{\r\n      dataSource.value.shift()\r\n      state.addEdit = false\r\n      addData.value = {}\r\n    }\r\n\r\n    // 处理标签项的添加\r\n    const inputRef = ref() //获取input标签，实现聚焦\r\n    const state = reactive({\r\n      inputVisible: false, //标签项输入框是否可见\r\n      inputValue: '', //标签项输入的值\r\n      addEdit:false //“添加标签项”是否可见\r\n    })\r\n    const showInput = () => {\r\n      state.inputVisible = true;\r\n      nextTick(() => {\r\n        inputRef.value.focus();\r\n      });\r\n    }\r\n    const handleInputConfirm = (key) => {\r\n      const inputValue = state.inputValue;\r\n      dataSource.value.map(item=>{\r\n        if(item.key === key){\r\n          let servers = item.servers\r\n          if (inputValue && servers.indexOf(inputValue) === -1) {\r\n            servers = [...servers, inputValue];\r\n          }\r\n          item.servers = servers\r\n          editableData[key] ? editableData[key].servers = servers : 1\r\n        }\r\n      })\r\n      Object.assign(state, {\r\n        inputVisible: false,\r\n        inputValue: '',\r\n      });\r\n    }\r\n\r\n    return{\r\n      t,columns,dataSource,editableData,...toRefs(search),addData,...toRefs(state),inputRef,\r\n      deleteHandle,editHandle,save,cancel,searchHandle,\r\n      addHandle,showInput,handleClose,handleInputConfirm,addSave,addCancel\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"less\">\r\n  .access-admin{\r\n    height: 600px;\r\n    background-color: white;\r\n    padding: 25px;\r\n    .other-action{\r\n      margin-bottom: 15px;\r\n      display: flex;\r\n      width: 100%;\r\n      justify-content: space-between;\r\n      .search{\r\n        width: 520px;\r\n        display: flex;\r\n        justify-content: space-between;\r\n      }\r\n    }\r\n    .action{\r\n      display: flex;\r\n      .edit{\r\n        padding-left: 10px;\r\n        margin-left: 10px;\r\n        border-left: 1px solid @borderColor;\r\n      }\r\n    }\r\n    // sure-cancle通用样式\r\n    .edit-sure{\r\n        width: 80px;\r\n        display: flex;\r\n        justify-content: space-between;  \r\n      }\r\n  }\r\n</style>","import { render } from \"./AccessAdmin.vue?vue&type=template&id=e98c572e\"\nimport script from \"./AccessAdmin.vue?vue&type=script&lang=js\"\nexport * from \"./AccessAdmin.vue?vue&type=script&lang=js\"\n\nimport \"./AccessAdmin.vue?vue&type=style&index=0&id=e98c572e&lang=less\"\n\nimport exportComponent from \"D:\\\\成型项目\\\\vue-admin\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// extracted by mini-css-extract-plugin\nmodule.exports = {\"name\":\"\\\"less\\\"\",\"headerColor\":\"var(--headerColor, #505464)\",\"chartColor\":\"var(--chartColor, #fafafa)\",\"borderColor\":\"var(--borderColor, #eef0fc)\",\"fontColor\":\"var(--fontColor, white)\",\"pointFontColor\":\"var(--pointFontColor, #4F94FA)\"};","'use strict';\nvar $ = require('../internals/export');\nvar fails = require('../internals/fails');\nvar isArray = require('../internals/is-array');\nvar isObject = require('../internals/is-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\nvar createProperty = require('../internals/create-property');\nvar arraySpeciesCreate = require('../internals/array-species-create');\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar V8_VERSION = require('../internals/engine-v8-version');\n\nvar IS_CONCAT_SPREADABLE = wellKnownSymbol('isConcatSpreadable');\nvar MAX_SAFE_INTEGER = 0x1FFFFFFFFFFFFF;\nvar MAXIMUM_ALLOWED_INDEX_EXCEEDED = 'Maximum allowed index exceeded';\n\n// We can't use this feature detection in V8 since it causes\n// deoptimization and serious performance degradation\n// https://github.com/zloirock/core-js/issues/679\nvar IS_CONCAT_SPREADABLE_SUPPORT = V8_VERSION >= 51 || !fails(function () {\n  var array = [];\n  array[IS_CONCAT_SPREADABLE] = false;\n  return array.concat()[0] !== array;\n});\n\nvar SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('concat');\n\nvar isConcatSpreadable = function (O) {\n  if (!isObject(O)) return false;\n  var spreadable = O[IS_CONCAT_SPREADABLE];\n  return spreadable !== undefined ? !!spreadable : isArray(O);\n};\n\nvar FORCED = !IS_CONCAT_SPREADABLE_SUPPORT || !SPECIES_SUPPORT;\n\n// `Array.prototype.concat` method\n// https://tc39.es/ecma262/#sec-array.prototype.concat\n// with adding support of @@isConcatSpreadable and @@species\n$({ target: 'Array', proto: true, forced: FORCED }, {\n  // eslint-disable-next-line no-unused-vars -- required for `.length`\n  concat: function concat(arg) {\n    var O = toObject(this);\n    var A = arraySpeciesCreate(O, 0);\n    var n = 0;\n    var i, k, length, len, E;\n    for (i = -1, length = arguments.length; i < length; i++) {\n      E = i === -1 ? O : arguments[i];\n      if (isConcatSpreadable(E)) {\n        len = lengthOfArrayLike(E);\n        if (n + len > MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        for (k = 0; k < len; k++, n++) if (k in E) createProperty(A, n, E[k]);\n      } else {\n        if (n >= MAX_SAFE_INTEGER) throw TypeError(MAXIMUM_ALLOWED_INDEX_EXCEEDED);\n        createProperty(A, n++, E);\n      }\n    }\n    A.length = n;\n    return A;\n  }\n});\n","export * from \"-!../../../../../node_modules/@vue/cli-service/node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../../node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../../node_modules/@vue/cli-service/node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AccessAdmin.vue?vue&type=style&index=0&id=e98c572e&lang=less\""],"sourceRoot":""}